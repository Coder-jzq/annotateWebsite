(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["pages-admin-databuild-databuild"],{"361f":function(t,e,n){"use strict";var a=n("4ea4");n("4160"),n("4e82"),n("d3b7"),n("e25e"),n("ac1f"),n("5319"),n("1276"),n("498a"),n("159b"),Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0,n("96cf");var i=a(n("1da1")),r={data:function(){return{count:10,percentage:100,message1:"上传数据集: 目的为将数据集的索引-单词(0-0-0 word)上传至数据库，方便后期的标注工作。\n\t\t\t\t\t  理论上只需一次上传即可。切勿随意操作，打乱数据库中保存的数据集格式。",message2:"清理所有数据集: 谨慎操作，会删除数据表中所有数据，包括已标注的数据。该功能在初始化数据集无误\n\t\t\t\t\t\t后，理应禁用。",timer:null}},methods:{delAll:function(){uni.request({method:"DELETE",url:this.$store.state.url+"/bz-record/delAll",success:function(t){uni.showToast({title:t.data.message})}})},initDatas:function(){var t=this;console.log("初始化开始...");var e=2540,n=2540,a=setInterval((function(){t.getDuiHua(n),t.percentage=n/e*100,n==e&&clearInterval(a),n++}),4e4)},diGuiInitDatas:function(t){var e=this;return(0,i.default)(regeneratorRuntime.mark((function n(){return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:if(console.log(t,typeof t,"**"),!(t>=e.count)){n.next=3;break}return n.abrupt("return");case 3:return n.next=5,e.getDuiHua(t);case 5:return n.next=7,e.diGuiInitDatas(t+1);case 7:case"end":return n.stop()}}),n)})))()},getDuiHua:function(t){var e=this;new Promise((function(n,a){uni.request({method:"GET",url:e.$store.state.url+"/file/getFiles",data:{idx:t},success:function(t){if(200==t.data.code){var e=t.data.result,a=[];e.forEach((function(t){var e=t.split(".");"txt"==e[1]&&a.push(t)})),n(a)}else uni.showToast({title:"资源获取失败"})}})})).then((function(n){e.read_f(n,t)}),(function(t){console.log(t),e.$message({message:t.msg,type:"error"})}))},ceshi1:function(){setTimeout((function(){console.log("一次")}),1e3)},read_f:function(t,e){var n=this,a=t;a.sort((function(t,e){return parseInt(t.replace(/_(.*).txt/g,""))-parseInt(e.replace(/_(.*).txt/g,""))}));var i="http://121.41.10.38:8822/"+e+"/",r=0,u=setInterval((function(){n.readTxt(i+a[r],e,r),r==a.length&&clearInterval(u),r++}),2e3)},readTxt:function(t,e,n){var a=this;uni.request({url:t,method:"GET",success:function(t){if(200==t.statusCode){var i=t.data,r=i.replace(/[(?<!\.{1,})\.(?!\.{1,})]|[,?!]/g," $&").trim(),u=r.replace(/[-]/g," $& ").trim(),s=u.split(" ");uni.request({method:"POST",url:a.$store.state.url+"/bz-record/addJz",data:{words:s,dh:e,jz:n},success:function(t){console.log(t.data.message)}})}}})}}};e.default=r},"5e20":function(t,e,n){"use strict";n.r(e);var a=n("b2ed"),i=n("c718");for(var r in i)"default"!==r&&function(t){n.d(e,t,(function(){return i[t]}))}(r);var u,s=n("f0c5"),c=Object(s["a"])(i["default"],a["b"],a["c"],!1,null,"3682a8db",null,!1,a["a"],u);e["default"]=c.exports},b2ed:function(t,e,n){"use strict";var a;n.d(e,"b",(function(){return i})),n.d(e,"c",(function(){return r})),n.d(e,"a",(function(){return a}));var i=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("v-uni-view",[n("v-uni-view",{staticStyle:{"line-height":"30px",padding:"10px","margin-bottom":"30px","text-align":"left"}},[n("el-button",{staticStyle:{width:"240px"},attrs:{plain:!0,disabled:!0},on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.initDatas.apply(void 0,arguments)}}},[t._v("上传数据集")]),n("el-button",{staticStyle:{width:"240px"},attrs:{plain:!0,disabled:!0},on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.delAll.apply(void 0,arguments)}}},[t._v("清理所有数据集")])],1),n("v-uni-view",{staticStyle:{margin:"30px 0","line-height":"30px"}},[n("el-alert",{attrs:{title:t.message1,type:"warning"}}),n("v-uni-view",{staticStyle:{margin:"5px"}}),n("el-alert",{attrs:{title:t.message2,type:"error"}})],1),n("v-uni-view",{staticStyle:{"background-color":"#FFFFFF",padding:"10px"}},[n("v-uni-view",{staticStyle:{"text-align":"left","font-weight":"700","line-height":"30px"}},[t._v("上传进度（已完成上传）：")]),n("v-uni-view",{},[n("el-progress",{attrs:{percentage:t.percentage,status:"success"}})],1)],1)],1)},r=[]},c718:function(t,e,n){"use strict";n.r(e);var a=n("361f"),i=n.n(a);for(var r in a)"default"!==r&&function(t){n.d(e,t,(function(){return a[t]}))}(r);e["default"]=i.a}}]);